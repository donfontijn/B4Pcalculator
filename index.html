<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B4P Innovatie Impact Calculator</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>[v-cloak] { display: none; }</style>
</head>
<body class="bg-gray-100 min-h-screen p-8">
    <div id="app" class="max-w-4xl mx-auto" v-cloak>
        <div class="bg-white rounded-lg shadow-lg p-8">
            <h1 class="text-2xl font-bold mb-6">B4P Innovatie Impact Calculator</h1>
            
            <div class="mb-6">
                <label class="block mb-2">Naam Innovatie</label>
                <input
                    type="text"
                    v-model="innovationName"
                    class="w-full p-2 border rounded"
                    placeholder="Voer de naam van de innovatie in"
                >
            </div>

            <div class="space-y-6">
                <div v-for="(activity, index) in activities" :key="activity.id" class="border rounded-lg p-6 bg-gray-50">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg">Activiteit {{ index + 1 }}</h3>
                        <button @click="removeActivity(index)" class="text-red-500 hover:text-red-700">Verwijderen</button>
                    </div>

                    <div class="grid grid-cols-2 gap-6 mb-4">
                        <div>
                            <label class="block mb-2">Naam Activiteit</label>
                            <input type="text" v-model="activity.name" class="w-full p-2 border rounded" placeholder="Voer activiteitnaam in">
                        </div>

                        <div>
                            <label class="block mb-2">Rol</label>
                            <select v-model="activity.role" class="w-full p-2 border rounded">
                                <option v-for="(data, role) in roles" :key="role" :value="role">{{ role }}</option>
                            </select>
                        </div>
                    </div>

                    <div class="space-y-6">
                        <div>
                            <label class="block mb-2">Huidige Tijd ({{ formatTime(activity.currentTime) }})</label>
                            <input type="range" v-model.number="activity.currentTime" min="10" max="600" class="w-full">
                        </div>

                        <div>
                            <label class="block mb-2">Tijd Na Innovatie ({{ formatTime(activity.newTime) }})</label>
                            <input type="range" v-model.number="activity.newTime" min="0" :max="activity.currentTime" class="w-full">
                        </div>

                        <div>
                            <label class="block mb-2">
                                Gemiddeld Aantal Dagen per Maand ({{ activity.workingDaysPerMonth }} dagen)
                            </label>
                            <input type="range" v-model.number="activity.workingDaysPerMonth" min="1" max="23" class="w-full">
                        </div>

                        <div>
                            <label class="block mb-2">Frequentie per Dag</label>
                            <input type="number" v-model.number="activity.frequency" class="w-full p-2 border rounded" min="1" placeholder="Voer aantal keer per dag in">
                        </div>
                    </div>

                    <div class="mt-4 text-sm text-gray-600">
                        Dagelijkse tijdsbesparing: {{ Math.round(getDailySaved(activity) / 60) }} minuten
                    </div>
                </div>
            </div>

            <div class="flex gap-4 mb-8 mt-6">
                <button @click="addActivity" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                    Activiteit Toevoegen
                </button>
            </div>

            <div class="bg-blue-50 p-6 rounded-lg">
                <div class="flex items-center gap-2 mb-4">
                    <h3 class="font-medium">Business Case Impact</h3>
                    <div class="relative">
                        <button 
                            @click="showInfo = !showInfo"
                            class="text-blue-500 hover:text-blue-700 rounded-full w-5 h-5 flex items-center justify-center border border-current"
                        >
                            i
                        </button>
                        <!-- Info Popover -->
                        <div 
                            v-if="showInfo"
                            class="absolute left-0 top-full mt-2 p-4 bg-white rounded-lg shadow-lg border border-gray-200 w-80 z-10"
                        >
                            <p class="text-sm text-gray-600 mb-3">
                                Bij het beoordelen van de financiële impact van dit innovatievoorstel is het belangrijk om rekening te houden met onzekerheden rondom het gebruik van de ontwikkelde scripts en tools. Hoewel de potentiële besparingen aanzienlijk zijn, varieert de frequentie waarmee de scripts worden ingezet per project.
                            </p>
                            <p class="text-sm text-gray-600 mb-3">
                                Deze berekening is gebaseerd op het totaal aantal medewerkers per rol (bijvoorbeeld 8 junior modellers) en hun respectievelijke uurtarieven.
                            </p>
                            <p class="text-sm text-gray-600">We presenteren drie scenario's:</p>
                            <ul class="list-disc pl-5 text-sm text-gray-600">
                                <li>Optimistisch scenario: Het maximale gebruik van de scripts (100%)</li>
                                <li>Realistisch scenario: Een gematigd gebruik van de scripts (70%)</li>
                                <li>Conservatief scenario: Minder frequent gebruik van de scripts (50%)</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- Green block with main impact -->
                <div class="bg-green-100 p-4 rounded-lg mb-6">
                    <h4 class="text-lg font-medium mb-2">Verwachte Jaarlijkse Besparing (Realistisch Scenario)</h4>
                    <p class="text-3xl font-bold mb-2">€{{ formatMoney(getYearlyImpact() * 0.7) }}</p>
                    <div class="text-sm text-gray-600">
                        <p>Optimistisch scenario (100%): €{{ formatMoney(getYearlyImpact()) }}</p>
                        <p>Conservatief scenario (50%): €{{ formatMoney(getYearlyImpact() * 0.5) }}</p>
                    </div>
                </div>

                <!-- Chart -->
                <div class="mb-6" style="height: 300px;">
                    <canvas id="impactChart"></canvas>
                </div>
            </div>
        </div>
        <div class="mt-8 flex justify-center">
            <button @click="downloadPDF" class="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 font-medium">
                PDF Rapport Downloaden
            </button>
        </div>
    </div>

    <script src="calculator.js"></script>
</body>
</html>